<template>
  <div class={wrapperClass}>
    <div class="slds-page-header__row">
      <div class="slds-page-header__col-title">
        <div class="slds-media">
          <div class="slds-media__figure" if:true={showMediaIcon}>
            <c-icon
              if:false={state.attachment.imageRef}
              theme={theme}
              icon-name={state.iconName}
              size={state.iconSize}
              bg-color={state.iconBgColor}
              color={state.iconColor}
            ></c-icon>
            <span
              if:true={state.attachment.imageRef}
              class={state.attachment.iconImgWrapperclass}
            >
              <img
                src={state.attachment.imageRef}
                alt={state.attachment.displayName}
              />
            </span>
          </div>
          <div class="slds-media__body">
            <div class="slds-page-header__name">
              <div class="slds-page-header__name-title">
                <h1>
                  <span>{state.header}</span>
                  <span
                    class="slds-page-header__title slds-truncate"
                    title={description}
                    >{description}</span
                  >
                </h1>
              </div>
            </div>
            <div class="spinner-container slds-m-left_large">
              <c-spinner
                variant="brand"
                if:true={showSpinner}
                alternative-text="loading"
              ></c-spinner>
            </div>
          </div>
        </div>
      </div>
      <div class="slds-page-header__col-actions">
        <div class="slds-page-header__controls">
          <div class="slds-page-header__control">
            <!-- slot here -->
            <slot name="sldsheaderbutton"></slot>
            <!-- slot ends -->
          </div>
        </div>
      </div>
    </div>
    <div class="slds-page-header__row">
      <div class="slds-page-header__col-meta">
        <p class="slds-page-header__meta-text">
          <!-- meta slot here -->
          <slot name="sldsheadermeta"></slot>
          <!-- meta slot ends -->
        </p>
      </div>
    </div>
    <div class="slds-page-header__row slds-page-header__row_gutters">
      <div class="slds-page-header__col-details">
        <!-- fields slot here -->
        <template if:false={state.isBaseVersion}>
          <slot name="sldsheaderfields"></slot>
        </template>
        <!-- fields slot ends -->
        <ul
          if:true={showFieldsSection}
          class="slds-page-header__detail-row flex-wrap-wrap"
        >
          <li
            if:true={fields}
            for:each={fields}
            for:item="field"
            key={field.label}
            class={field.class}
          >
            <div class="slds-text-title slds-truncate" title={field.label}>
              {field.label}
            </div>
            <template if:false={field.showIcon}>
              <div class="slds-truncate" title={field.label}>
                <c-output-field
                  record={obj}
                  field-name={field.name}
                  type={field.type}
                  valueclass="slds-truncate slds-show"
                ></c-output-field>
              </div>
            </template>
            <template if:true={field.showIcon}>
              <c-icon
                if:true={field.showCheck}
                icon-name={_iconName}
                variant={_iconVariant}
                bg-color={_iconBgColor}
                size={_iconSize}
                extraclass={iconExtraClass}
                baseurl={iconUrl}
                theme={theme}
              >
              </c-icon>
            </template>
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>
