/*************************************************************************
 *
 * VLOCITY, INC. CONFIDENTIAL
 * __________________
 *
 *  [2014] - [2020] Vlocity, Inc.
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Vlocity, Inc. and its suppliers,
 * if any. The intellectual and technical concepts contained
 * herein are proprietary to Vlocity, Inc. and its suppliers and may be
 * covered by U.S. and Foreign Patents, patents in process, and are
 * protected by trade secret or copyright law. Dissemination of this
 * information and reproduction, modification or reverse-engineering
 * of this material, is prohibited unless prior written permission
 * is obtained from Vlocity, Inc.
 *
 * Build: v234.0.0
 */
function makeUrl() {
  let types, queryStringObj, queryString;
  types = {
    "/native/bridge.app": "hybrid",
    "/one/one.app": "web"
  };
  queryStringObj = {
    isdtp: "p1",
    sfdcIFrameOrigin: getOrigin(),
    sfdcIFrameHost:
      "sfNativeBridge" in window
        ? "hybrid"
        : types[window.location.pathname.toLowerCase()] || "web"
  };
  // eslint-disable-next-line no-shadow
  queryString = Object.keys(queryStringObj).reduce(function(queryString, key) {
    return (
      queryString +
      (queryString.length > 1 ? "&" : "") +
      encodeURIComponent(key) +
      "=" +
      encodeURIComponent(queryStringObj[key])
    );
  }, "");

  return queryString;
}

function getOrigin() {
  return "origin" in window.location
    ? window.location.origin
    : [
        window.location.protocol,
        "//",
        window.location.hostname,
        window.location.port ? ":" + window.location.port : ""
      ].join("");
}

export default makeUrl;
