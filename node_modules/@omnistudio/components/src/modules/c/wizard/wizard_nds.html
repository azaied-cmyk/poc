<template>
  <div class="vlocity-toast-container vlocity-toast-container_top-center">
    <c-toast theme={state.theme} class="nds-hide"> </c-toast>
  </div>
  <div if:true={state.showWizard}>
    <section
      role="dialog"
      tabindex="-1"
      class="nds-modal nds-fade-in-open nds-modal_large"
    >
      <div class="nds-modal__container">
        <header class="nds-modal__header">
          <button
            class="nds-button nds-button_icon nds-modal__close nds-button_icon-inverse"
            title={translatedLabels.closeLabel}
            onclick={handleClose}
          >
            <c-icon
              theme={state.theme}
              icon-name="utility:close"
              color="#fff"
              size="x-small"
            ></c-icon>
            <span class="nds-assistive-text"
              >{translatedLabels.closeLabel}</span
            >
          </button>
          <h2 class="nds-text-heading_medium">{state.header}</h2>
        </header>
        <!-- Modal content here -->
        <div
          class="nds-modal__content nds-grow nds-p-around_medium"
          data-openstate={state.openStep}
        >
          <c-spinner
            if:true={state.showSpinner}
            alternative-text="Saving..."
            size="medium"
            theme={state.theme}
          ></c-spinner>
          <slot name="wizarditem"></slot>
        </div>
        <!-- content ends -->
        <footer class="nds-modal__footer nds-grid nds-grid_align-spread">
          <button class="nds-button nds-button_neutral" onclick={handleClose}>
            {translatedLabels.cancelLabel}
          </button>
          <button
            if:true={state.backEnabled}
            class="nds-button nds-button_brand"
            onclick={goBack}
          >
            {translatedLabels.backLabel}
          </button>
          <div class="nds-progress nds-progress_shade">
            <ol class="nds-progress__list">
              <template for:each={state.wizardItems} for:item="wizardItem">
                <li class={wizardItem.progressClass} key={wizardItem.id}>
                  <button
                    class={wizardItem.buttonClass}
                    title={translatedLabels.stepLabel}
                    data-wizarditemid={wizardItem.id}
                  >
                    <c-icon
                      if:true={wizardItem.isComplete}
                      icon-name="utility:success"
                      color="#5eb4ff"
                      size="xx-small"
                      theme={state.theme}
                    ></c-icon>
                    <span class="nds-assistive-text"
                      >{translatedLabels.stepLabel}</span
                    >
                  </button>
                </li>
              </template>
            </ol>
            <c-progress-bar
              progress={state.progress}
              size="x-small"
              theme={state.theme}
            ></c-progress-bar>
          </div>
          <button
            class="nds-button nds-button_brand"
            onclick={handleButtonClick}
            value={buttonValue}
          >
            {buttonValue}
          </button>
        </footer>
      </div>
    </section>
    <div class="nds-backdrop nds-backdrop_open"></div>
  </div>
</template>
