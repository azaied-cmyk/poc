/*************************************************************************
 *
 * VLOCITY, INC. CONFIDENTIAL
 * __________________
 *
 *  [2014] - [2020] Vlocity, Inc.
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Vlocity, Inc. and its suppliers,
 * if any. The intellectual and technical concepts contained
 * herein are proprietary to Vlocity, Inc. and its suppliers and may be
 * covered by U.S. and Foreign Patents, patents in process, and are
 * protected by trade secret or copyright law. Dissemination of this
 * information and reproduction, modification or reverse-engineering
 * of this material, is prohibited unless prior written permission
 * is obtained from Vlocity, Inc.
 *
 * Build: v234.0.0
 */
import { createElement } from "lwc";
import VlocityRadioImageGroup from "c/radioImageGroup";

describe("c-radio-image-group", () => {
  afterEach(() => {
    while (document.body.firstChild) {
      document.body.removeChild(document.body.firstChild);
    }
  });

  it("renders DOM elements", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.options = radioItems1;
    element.enabledCaption = true;
    element.imageCountInRow = 3;
    document.body.appendChild(element);
    expect(element.shadowRoot.children).not.toHaveLength(0);
  });

  /**
   * Check if the theme is applied properly
   */
  it("Check if theme is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.options = radioItems1;
    element.enabledCaption = true;
    element.isImage = true;
    element.imageCountInRow = 3;
    document.body.appendChild(element);
    const button = element.shadowRoot.querySelector("label");
    let index = button.className.indexOf("slds") !== -1 ? true : false;
    expect(index).toBe(true);
  });

  /* Check if the label is set */
  it("Check If label is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.options = radioItems1;
    element.isImage = true;
    element.enabledCaption = true;
    element.imageCountInRow = 3;
    document.body.appendChild(element);
    return Promise.resolve().then(() => {
      const label = element.shadowRoot.querySelector("legend");
      expect(label.textContent).toBe("radio");
    });
  });

  /* Check if the image is displayed */
  it("Check If image is displayed", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.options = radioItems1;
    element.enabledCaption = true;
    element.imageCountInRow = 3;
    element.isImageDisplay = true;
    document.body.appendChild(element);
    const image = element.shadowRoot.querySelector("img");
    expect(image.src).toBe(
      "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
    );
  });

  /* Check if the enabledCaption is set */
  it("Check If enabledCaption is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.options = radioItems1;
    element.enabledCaption = true;
    element.imageCountInRow = 3;
    document.body.appendChild(element);
    const image = element.getElementsByClassName("vlc-caption-out_cont")[0];
    expect(image).not.toBe(null);
  });

  /* Check if the image label is set */
  it("Check If image label is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        label: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        label: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", label: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.options = radioItems1;
    element.enabledCaption = true;
    element.imageCountInRow = 3;
    document.body.appendChild(element);
    const image = element.shadowRoot.querySelector(".captionOut");
    expect(image.textContent).toBe("male");
  });

  /* Check if value is set if there is no image */
  it("Check If image value is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        label: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        label: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", label: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.options = radioItems1;
    element.enabledCaption = true;
    element.imageCountInRow = 3;
    document.body.appendChild(element);
    // eslint-disable-next-line @lwc/lwc/no-async-operation
    window.setTimeout(function() {
      const image = element.getElementsByClassName("vlc-img-wrapper")[2];
      expect(image.textContent).toBe("others");
    }, 50);
  });

  /* Check if the controlWidth is set */
  it("Check If controlWidth is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.controlWidth = 300;
    element.options = radioItems1;
    element.enabledCaption = true;
    document.body.appendChild(element);
    const image = element.shadowRoot.querySelector(".vlc-img_select-container");
    const parentDiv = element.shadowRoot.querySelector("input").parentNode;
    let index =
      image.className.indexOf("slds-img_option-width-height") !== -1
        ? true
        : false;
    let wrapper =
      parentDiv.className.indexOf("slds-static-wrapper") !== -1 ? true : false;
    expect(wrapper).toBe(true);
    expect(index).toBe(true);
    expect(image.style.width).toBe("300px");
  });

  /* Check if the controlHeight is set */
  it("Check If controlHeight is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.theme = "nds";
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.controlWidth = 300;
    element.controlHeight = 300;
    element.options = radioItems1;
    element.enabledCaption = true;
    document.body.appendChild(element);
    const image = element.shadowRoot.querySelector(".vlc-img_select-container");
    const parentDiv = element.shadowRoot.querySelector("input").parentNode;
    let index =
      image.className.indexOf("nds-radio__label") !== -1 ? true : false;
    let wrapper =
      parentDiv.className.indexOf("nds-static-wrapper") !== -1 ? true : false;
    expect(wrapper).toBe(true);
    expect(index).toBe(true);
    expect(image.style.height).toBe("300px");
  });

  /* Check if the imageCountInRow is set */
  it("Check If imageCountInRow is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.imageCountInRow = 3;
    element.options = radioItems1;
    element.enabledCaption = true;
    document.body.appendChild(element);
    const image = element.shadowRoot.querySelector(".vlc-img-wrapper");
    const imageWidthClassContains = image.classList.contains(
      "slds-size_1-of-" + element.imageCountInRow
    );
    let width = 100 / 3 + "%";
    const parentDiv = element.shadowRoot.querySelector("input").parentNode;
    const label = element.shadowRoot.querySelector(".vlc-img_select-container");
    let index =
      label.className.indexOf("slds-img_no-width-height") !== -1 ? true : false;
    let wrapper =
      parentDiv.className.indexOf("vlc-img-wrapper") !== -1 ? true : false;
    expect(wrapper).toBe(true);
    expect(index).toBe(true);
    expect(imageWidthClassContains).toBe(true);
    expect(image.style.paddingTop).toBe(width);
  });

  /* Check if the value is checked */
  it("Check If value is checked", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.imageCountInRow = 3;
    element.options = radioItems1;
    element.value = "female";
    element.enabledCaption = true;
    document.body.appendChild(element);
    const input = element.shadowRoot.querySelectorAll("input")[1];
    expect(input.checked).toBe(true);
  });

  /* Check if the value is set */
  it("Check If value is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.imageCountInRow = 3;
    element.options = radioItems1;
    element.enabledCaption = true;
    document.body.appendChild(element);
    const input = element.shadowRoot.querySelectorAll("input");
    input[0].click();
    return Promise.resolve().then(() => {
      expect(element.value).toBe("male");
    });
  });

  /* Check if the isDisplayradio works */
  it("Check If isDisplayRadio works", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems = [
      { name: "male", value: "male" },
      { name: "female", value: "female" },
      { name: "others", value: "others" }
    ];
    element.theme = "nds";
    element.name = "radio image group";
    element.type = "radio";
    element.options = radioItems;
    element.label = "radio";
    element.isDisplayRadio = true;
    document.body.appendChild(element);
    const input = element.shadowRoot.querySelector("input").parentNode;
    const radioBlock = element.getElementsByClassName(
      "nds-form-element__control"
    );
    let isDisplayRadio =
      input.className.indexOf("nds-radio") !== -1 ? true : false;
    expect(radioBlock).not.toBe(null);
    expect(isDisplayRadio).toBe(true);
  });

  /* Check if the isDisplayWide works */
  it("Check If isDisplayWide works", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems = [
      { name: "male", value: "male" },
      { name: "female", value: "female" },
      { name: "others", value: "others" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.options = radioItems;
    element.label = "radio";
    element.isDisplayWide = true;
    document.body.appendChild(element);
    const input = element.shadowRoot.querySelector("input").parentNode;
    let isDisplayRadio =
      input.className.indexOf("slds-radio_button") !== -1 ? true : false;
    expect(isDisplayRadio).toBe(true);
  });

  /* Check if the horizontalMode is set */
  it("Check If horizontalMode is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems = [
      { name: "male", value: "male" },
      { name: "female", value: "female" },
      { name: "others", value: "others" }
    ];
    element.name = "radio image group";
    element.type = "radio";
    element.options = radioItems;
    element.label = "radio";
    element.isDisplayRadio = true;
    element.horizontalMode = true;
    document.body.appendChild(element);
    const radioBlock = element.getElementsByClassName("slds-radio-block");
    expect(radioBlock).not.toBe(null);
  });

  /* Check if the isImage is set */
  it("Check If isImage is set", () => {
    const element = createElement("c-radio-image-group", {
      is: VlocityRadioImageGroup
    });
    let radioItems1 = [
      {
        name: "male",
        value: "male",
        imgId:
          "https://image.shutterstock.com/image-photo/summer-beach-holiday-online-shopping-450w-461355724.jpg"
      },
      {
        name: "female",
        value: "female",
        imgId:
          "https://cdn.pixabay.com/photo/2015/11/06/15/13/internet-1028794__340.jpg"
      },
      { name: "others", value: "others", imgId: "" }
    ];
    element.theme = "nds";
    element.name = "radio image group";
    element.type = "radio";
    element.label = "radio";
    element.isImage = true;
    element.imageCountInRow = 3;
    element.options = radioItems1;
    element.enabledCaption = true;
    document.body.appendChild(element);
    const input = element.shadowRoot.querySelector("input").parentNode;
    let index =
      input.className.indexOf("nds-radio_custom-group") !== -1 ? true : false;
    expect(index).toBe(true);
    expect(element.isDisplayRadio).toBe(false);
    expect(element.isDisplayWide).toBe(false);
  });
});
